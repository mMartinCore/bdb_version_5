 !function(a){"use strict";"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof module&&module.exports?module.exports=a(require("jquery")):a(window.jQuery)}(function(a){"use strict";var b,c,d;b={NAMESPACE:".popoverX",kvLog:function(a){a="bootstrap-popover-x: "+a,window.console&&window.console.log?window.console.log(a):window.alert(a)},addCss:function(a,b){a.removeClass(b).addClass(b)},handler:function(a,c,d){var e=c+b.NAMESPACE;return a.off(e).on(e,d)},raise:function(a,c,d){var e=c+(void 0===d?".target":d)+b.NAMESPACE;return a.trigger(e)}},c=function(b,c){var d=this;d.options=c,d.$element=a(b),d.init()},d=function(b,c){var d=this;d.options=c,d.$element=a(b),d.$dialog=d.$element,d.init()},c.prototype={constructor:c,init:function(){var f,g,i,c=this,d=c.$element,e=c.options||{},h=d.attr("href");if(i=function(a){b.kvLog("PopoverX initialization skipped! "+a)},c.href=h,!d||!d.length)return void i("PopoverX triggering button element could not be found.");if(g=a(e.target?e.target:d.attr("data-target")||h&&h.replace(/.*(?=#[^\s]+$)/,"")),b.addCss(g,"popover-x"),c.$dialog=g,!g.length)return void i("PopoverX dialog element could not be found.");if(!g.data("popover-x")){var j=a.extend(!0,{remote:h&&!/#/.test(h)},g.data(),d.data(),e);j.$target=d,g.popoverX(j)}return f=e.trigger,"string"!==typeof f?void i("Invalid or improper configuration for PopoverX trigger."):(f=f.split(" "),void a.each(f,function(a,b){c.listen(b)}))},listen:function(a){var g,h,c=this,d=c.$element,e=c.$dialog,f=!1,i=c.href;"manual"!==a&&("click"!==a&&"keyup"!==a&&(f=!0),f?(g="hover"===a?"mouseenter":"focusin",h="hover"===a?"mouseleave":"focusout",b.handler(d,g,function(){b.raise(e,g).popoverX("show")}),b.handler(d,h,function(){b.raise(e,h).popoverX("hide")})):b.handler(d,a,function(c){return"keyup"===a?void(e&&27===c.which&&b.raise(e,a).popoverX("hide")):(i&&"click"===a&&c.preventDefault(),b.raise(e,a).popoverX("toggle"),void b.handler(e,"hide",function(){d.focus()}))}))},destroy:function(){var a=this;a.$element.off(b.NAMESPACE),a.$dialog.off(b.NAMESPACE)}},d.prototype=a.extend({},a.fn.modal.Constructor.prototype,{constructor:d,init:function(){var c=this,d=c.$element,e=c.options.$container;e&&e.length&&(c.$body=e),c.$body&&c.$body.length||(c.$body=a(document.body)),c.bodyPadding=c.$body.css("padding"),c.$target=c.options.$target,c.$marker=a(document.createElement("div")).addClass("popover-x-marker").insertAfter(d).hide(),d.find(".popover-footer").length&&b.addCss(d,"has-footer"),c.options.remote&&d.find(".popover-content").load(c.options.remote,function(){d.trigger("load.complete.popoverX")}),d.on("click.dismiss"+b.NAMESPACE,'[data-dismiss="popover-x"]',a.proxy(c.hide,c)),a(window).resize(function(){d.hasClass("kv-popover-active")&&(c.hide(),setTimeout(function(){c.show(!0)},50))})},getPlacement:function(){var a=this,b=a.getPosition(),c=a.options.placement,d=document.documentElement,e=document.body,f=d.clientWidth,g=d.clientHeight,h=Math.max(e.scrollTop||0,d.scrollTop),i="horizontal"===c,j=Math.max(e.scrollLeft||0,d.scrollLeft),k="vertical"===c,l=Math.max(0,b.left-j),m=Math.max(0,b.top-h),n="auto"===c||i||k,o=window.innerWidth||d||document.body.clientWidth;if(a.options.autoPlaceSmallScreen&&o<a.options.smallScreenWidth&&(n=!0),n)return l<f/3?m<g/3?i?"right right-top":"bottom bottom-left":m<2*g/3?k?m<=g/2?"bottom bottom-left":"top top-left":"right":i?"right right-bottom":"top top-left":l<2*f/3?m<g/3?i?l<=f/2?"right right-top":"left left-top":"bottom":m<2*g/3?i?l<=f/2?"right":"left":m<=g/2?"bottom":"top":i?l<=f/2?"right right-bottom":"left left-bottom":"top":m<g/3?i?"left left-top":"bottom bottom-left":m<2*g/3?k?m<=g/2?"bottom-right":"top-right":"left":i?"left left-bottom":"top top-left";switch(c){case"auto-top":return l<f/3?"top top-left":l<2*f/3?"top":"top top-right";case"auto-bottom":return l<f/3?"bottom bottom-left":l<2*f/3?"bottom":"bottom bottom-right";case"auto-left":return m<g/3?"left left-top":m<2*g/3?"left":"left left-bottom";case"auto-right":return m<g/3?"right right-top":m<2*g/3?"right":"right right-bottom";default:return c}},getPosition:function(){var b=this,c=b.$target,d=c[0].getBoundingClientRect(),e=b.$body,f=e.css("position");if(e.is(document.body)||"static"===f)return a.extend({},c.offset(),{width:c[0].offsetWidth||d.width,height:c[0].offsetHeight||d.height});if("relative"===f)return{top:c.offset().top-e.offset().top,left:c.offset().left-e.offset().left,width:c[0].offsetWidth||d.width,height:c[0].offsetHeight||d.height};var g=e[0].getBoundingClientRect();return{top:d.top-g.top+e.scrollTop(),left:d.left-g.left+e.scrollLeft(),width:d.width,height:d.height}},refreshPosition:function(){var e,a=this,c=a.$element,d=a.getPosition(),f=c[0].offsetWidth,g=c[0].offsetHeight,h=a.getPlacement();switch(h){case"bottom":e={top:d.top+d.height,left:d.left+d.width/2-f/2};break;case"bottom bottom-left":e={top:d.top+d.height,left:d.left};break;case"bottom bottom-right":e={top:d.top+d.height,left:d.left+d.width-f};break;case"top":e={top:d.top-g,left:d.left+d.width/2-f/2};break;case"top top-left":e={top:d.top-g,left:d.left};break;case"top top-right":e={top:d.top-g,left:d.left+d.width-f};break;case"left":e={top:d.top+d.height/2-g/2,left:d.left-f};break;case"left left-top":e={top:d.top,left:d.left-f};break;case"left left-bottom":e={top:d.top+d.height-g,left:d.left-f};break;case"right":e={top:d.top+d.height/2-g/2,left:d.left+d.width};break;case"right right-top":e={top:d.top,left:d.left+d.width};break;case"right right-bottom":e={top:d.top+d.height-g,left:d.left+d.width};break;default:b.kvLog("Invalid popover placement '"+h+"'.")}c.removeClass("bottom top left right bottom-left top-left bottom-right top-right left-bottom left-top right-bottom right-top").css(e).addClass(h+" in")},validateOpenPopovers:function(){var b=this,c=b.$element;b.options.closeOpenPopovers&&b.$body.find(".popover:visible").each(function(){var b=a(this);b.is(c)||b.popoverX("hide")})},hide:function(){var a=this,b=a.$element;a.$body.removeClass("popover-x-body"),b.removeClass("kv-popover-active"),b.modal("hide"),b.insertBefore(a.$marker)},show:function(a){var c=this,d=c.$element;d.addClass("kv-popover-active"),d.css(c.options.dialogCss).appendTo(c.$body),a||c.validateOpenPopovers(),b.addCss(c.$body,"popover-x-body"),d.modal("show"),c.$body.css({padding:c.bodyPadding}),d.css({padding:0}),c.refreshPosition()},destroy:function(){var a=this;a.$element.off(b.NAMESPACE)}}),a.fn.popoverButton=function(b){var d=this;return d.each(function(){var d=a(this),e=d.data("popover-button"),f=a.extend({},a.fn.popoverButton.defaults,d.data(),"object"===typeof b&&b);e||d.data("popover-button",e=new c(this,f)),"string"===typeof b&&e[b]()})},a.fn.popoverX=function(b){var c=this;return c.each(function(){var c=a(this),e=c.data("popover-x"),f=a.extend({},a.fn.popoverX.defaults,c.data(),"object"===typeof b&&b);f.$target||(f.$target=e&&e.$target?e.$target:b.$target||a(b.target)),e||c.data("popover-x",e=new d(this,f)),"string"===typeof b?e[b]():f.show&&e.show(!0)})},a.fn.popoverButton.defaults={trigger:"click keyup"},a.fn.popoverX.defaults=a.extend(!0,{},a.fn.modal.defaults,{placement:"auto",dialogCss:{top:0,left:0,display:"block","z-index":1050},keyboard:!0,autoPlaceSmallScreen:!0,smallScreenWidth:640,closeOpenPopovers:!0,backdrop:!1,show:!1}),a.fn.popoverButton.Constructor=c,a.fn.popoverX.Constructor=d,a(document).ready(function(){var b=a("[data-toggle='popover-x']");b.length&&b.popoverButton()})});